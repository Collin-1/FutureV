@model List<FutureV.Models.Car>
@{
    ViewData["Title"] = "Manage Cars";
}

<section class="container py-5">
    <div class="d-flex justify-content-between align-items-center mb-4 flex-wrap gap-3">
        <div>
            <h1 class="display-6 mb-0">Fleet Forge</h1>
            <p class="text-muted mb-0">Curate FutureV vehicles and their immersive galleries.</p>
        </div>
        <div class="d-flex gap-2">
            <a class="btn btn-primary" asp-controller="Cars" asp-action="Create">Add Futuristic Car</a>
            <form method="post" asp-controller="Admin" asp-action="Logout">
                @Html.AntiForgeryToken()
                <button type="submit" class="btn btn-outline-secondary">Sign out</button>
            </form>
        </div>
    </div>

    @if (TempData["StatusMessage"] is string statusMessage)
    {
        <div class="alert alert-success">@statusMessage</div>
    }

    @if (Model.Count == 0)
    {
        <div class="alert alert-info shadow-sm">No vehicles yet. Deploy your first concept to populate the catalog.</div>
    }
    else
    {
        <div class="table-responsive shadow-sm rounded">
            <table class="table align-middle mb-0">
                <thead class="table-dark">
                    <tr>
                        <th>Name</th>
                        <th>Tagline</th>
                        <th>Base Price</th>
                        <th>Autonomy</th>
                        <th>Images</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                @foreach (var car in Model)
                {
                    <tr>
                        <td>@car.Name</td>
                        <td>@car.Tagline</td>
                        <td>@car.BasePrice.ToString("C0")</td>
                        <td>@car.AutonomyLevel</td>
                        <td>@car.Images.Count</td>
                        <td class="text-end">
                            <a class="btn btn-sm btn-outline-secondary" asp-controller="Cars" asp-action="Edit" asp-route-id="@car.Id">Edit</a>
                            <a class="btn btn-sm btn-outline-info" asp-controller="Catalog" asp-action="Details" asp-route-id="@car.Id">Preview</a>
                            <a class="btn btn-sm btn-outline-danger" asp-controller="Cars" asp-action="Delete" asp-route-id="@car.Id">Delete</a>
                        </td>
                    </tr>
                }
                </tbody>
            </table>
        </div>
    }
</section>
